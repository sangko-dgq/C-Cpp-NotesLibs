在C/C++中，对于`int a;`这样简单的类型声明我们自然一眼就可以看懂。但是下面这个呢？

```
int (*(*v)[])();
```

如果你被搞懵了，我教你一个黄金法则，按照这个步骤你就能读懂任何类型声明：

1. **找到变量名，如果没有变量名，找到最里面的结构**
2. **向右看，读出你看到的东西，但是不要跳过括号**
3. **再向左看，读出你看到的东西，但是也不要跳过括号**
4. **如果有括号的话，跳出一层括号**
5. **重复上述过程，直到你读出最终的类型**

以上过程同时适用于变量和函数的类型声明（包括函数指针）。

我们来举一些具体的例子操练一下。

```c++
int *v[5];
```

首先找到变量v，然后向右看，数组尺寸5，右边没东西了向左看，指针，指向int。所以v就是一个尺寸5的数组，每个元素是一个指向int的指针。

或者更符合汉语习惯的，v是一个有5个指向int的指针的数组。

加个括号之后又是什么意思呢？

```c++
int (*v)[5];
```

有括号之后不能跳过，需要优先考虑括号内的声明，所以v是个指针，然后呢？向右看，v是个指针→数组5→整型，所以v是个指向有5个整数的数组的指针。

**函数指针**

我们都知道

```c++
int func();
```

是个函数声明，func是个返回int型的函数，那下面这个呢？

```c++
int (*func)();
```

先看括号里面的，func是个指针，然后跳出括号向右看，是个函数，回到左边，返回值为int型，所以func是个指针，指向一个（返回）int型的函数。

这就是函数指针。

让我们搞点稍微复杂点的东西

```c++
int (*v[])();
```

v是个数组，数组每个元素是指针，跳出括号，每个指针指向一个int型函数。所以v是一个int型函数指针组成的数组。

### **回答开头的问题**

有了上面的知识，你就直到如何回答开头的问题了

```c++
int (*(*v)[])();
```

v是个指针，指向一个元素是指针的数组，这个数组中每个指针指向一个int型函数。

捋顺了就是，v是一个指向int型函数指针组成的数组的指针。

### **const**

const是常量声明，意思是不能改变变量的值。const处在变量声明中不同位置的时候，效果是不一样的。很多同学刚学习的时候也容易搞混。

最简单的

```c++
int const a;
```

等价于

```c++
const int a;
```

意思是a的值不能改变。

加入指针后情况变得复杂一点

```c++
int const *r;
```

先找到核心变量r，看向右边没东西，回到左边看到*，所以r是个指针，再向左const int，所以r是一个指向const int的指针，*r不能改变，但r本身不是const，所以可以改变，你可以给r赋值，让它指向别的地方。

我们把const和*的位置换一下，效果就完全不同了，如下

```c++
int *const r;
```

r向右看没东西，回到左边看到const，所以r是个const，再向左看到*，所以r是个const指针，指向int。意味着r的值本身不能改变，你不能给r赋值。但是int没有const修饰，所以*r是可以改变的。